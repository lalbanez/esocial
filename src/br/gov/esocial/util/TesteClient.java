package br.gov.esocial.util;

import java.rmi.RemoteException;

import br.gov.esocial.servicos.empregador.consulta.ws.ConsultaClientProxy;

public class TesteClient {
	private static final String XML_CONSULTA = 
			"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n" + 
			"<eSocial xmlns=\"http://www.esocial.gov.br/schema/lote/eventos/envio/consulta/retornoProcessamento/v1_0_0\">\r\n" + 
			"	<consultaLoteEventos>\r\n" + 
			"		<protocoloEnvio>\r\n" + 
			"			1.2.201809.0000000000004475132\r\n" + 
			"		</protocoloEnvio>\r\n" + 
			"	</consultaLoteEventos>\r\n" + 
			"</eSocial>";

	public static void main(String[] args) throws RemoteException {
		EsocialUtil util = new EsocialUtil();
		util.getConfiguracao();

		ConsultaClientProxy proxy = new ConsultaClientProxy();
		long tmpInicio = System.currentTimeMillis();
		proxy.setEndpoint("http://localhost:8085/EnvioConsultaEsocial/services/ConsultaClient");

		System.out.println(proxy.consultaEsocial(XML_CONSULTA));
		long tmpFim = System.currentTimeMillis();
		System.out.println(tmpFim - tmpInicio);
	}
	
	private static final String XML_ENVIO = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<eSocial xmlns=\"http://www.esocial.gov.br/schema/lote/eventos/envio/v1_1_1\">\r\n  <envioLoteEventos grupo=\"1\">\r\n    <ideEmpregador>\r\n      <tpInsc>1</tpInsc>\r\n      <nrInsc>09041213</nrInsc>\r\n    </ideEmpregador>\r\n    <ideTransmissor>\r\n      <tpInsc>2</tpInsc>\r\n      <nrInsc>28247358808</nrInsc>\r\n    </ideTransmissor>\r\n    <eventos>\r\n      <evento Id=\"ID1090412130000002018090410324100002\">\r\n \t<eSocial xmlns=\"http://www.esocial.gov.br/schema/evt/evtInfoEmpregador/v02_04_02\">\r\n\t<evtInfoEmpregador Id=\"ID1090412130000002018090410324100002\">\r\n\t\t<ideEvento>\r\n\t\t\t<tpAmb>2</tpAmb>\r\n\t\t\t<procEmi>1</procEmi>\r\n\t\t\t<verProc>2.4.02 Beta</verProc>\r\n\t\t</ideEvento>\r\n\t\t<ideEmpregador>\r\n\t\t\t<tpInsc>1</tpInsc>\r\n\t\t\t<nrInsc>09041213</nrInsc>\r\n\t\t</ideEmpregador>\r\n\t\t<infoEmpregador>\r\n\t\t\t<inclusao>\r\n\t\t\t\t<idePeriodo>\r\n\t\t\t\t\t<iniValid>2018-05</iniValid>\r\n\t\t\t\t</idePeriodo>\r\n\t\t\t\t<infoCadastro>\r\n\t\t\t\t\t<nmRazao>SÃO PAULO PREVIDÊNCIA</nmRazao>\r\n\t\t\t\t\t<classTrib>85</classTrib>\r\n\t\t\t\t\t<natJurid>1112</natJurid>\r\n\t\t\t\t\t<indCoop>0</indCoop>\r\n\t\t\t\t\t<indConstr>0</indConstr>\r\n\t\t\t\t\t<indDesFolha>0</indDesFolha>\r\n  \t\t\t\t\t<indOptRegEletron>1</indOptRegEletron>\r\n\t\t\t\t\t<indEntEd>N</indEntEd>\r\n\t\t\t\t\t<indEtt>N</indEtt>\r\n\t\t\t\t\t<contato>\r\n\t\t\t\t\t\t<nmCtt>JOSE ROBERTO DE MORAES</nmCtt>\r\n\t\t\t\t\t\t<cpfCtt>51907488804</cpfCtt>\r\n\t\t\t\t\t\t<foneCel>11958465954</foneCel>\r\n\t\t\t\t\t</contato>\r\n\t\t\t\t\t<infoComplementares>\r\n\t\t\t\t\t\t<situacaoPJ>\r\n\t\t\t\t\t\t\t<indSitPJ>0</indSitPJ>\r\n\t\t\t\t\t\t</situacaoPJ>\r\n\t\t\t\t\t</infoComplementares>\r\n\t\t\t\t</infoCadastro>\r\n\t\t\t</inclusao>\r\n\t\t</infoEmpregador>\r\n\t</evtInfoEmpregador>\r\n<Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\"><SignedInfo><CanonicalizationMethod Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\"/><SignatureMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\"/><Reference URI=\"\"><Transforms><Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\"/><Transform Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\"/></Transforms><DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha256\"/><DigestValue>LNB3bvjRR7gOroF3FwfyjbnsHvNFLP6Km8T8Gq4/TXY=</DigestValue></Reference></SignedInfo><SignatureValue>TJZmvPFp3shxyT3rb86J0Cu1Z2WQwGM0WsPyHxViHn+tludo9/dVKJth3wzmg4ARFJM/8uya7T1I\r\nHNL6s4qXHFmK6DucBwKyh1h0AmqdAAQHIT5K8T3caRZ6lR041Q0O/EnwGuGVMyTXmIPEonaFiHS9\r\nOiRbdH0gQPV0fuuPJ+NQRpzzk8aQoO441GmwbRxVowEGvBY5yWccrguZFx8L/6wJXrkE5ksGkL4J\r\nqwxjTZifckk0mq/VQJBUZOzc37R1z0eVdQN38RB21HV2Zncp4eg7xeCvrf11QGPEJiGYvQU1cfus\r\nwcWzGr8VTg6zATOT+YCKP2f/eVUzTtmdT2jYPw==</SignatureValue><KeyInfo><X509Data><X509Certificate>MIIH3jCCBcagAwIBAgIJARpoGfW3H8XcMA0GCSqGSIb3DQEBCwUAMIGCMQswCQYDVQQGEwJCUjET\r\nMBEGA1UEChMKSUNQLUJyYXNpbDE2MDQGA1UECxMtU2VjcmV0YXJpYSBkYSBSZWNlaXRhIEZlZGVy\r\nYWwgZG8gQnJhc2lsIC0gUkZCMSYwJAYDVQQDEx1BQyBJbXByZW5zYSBPZmljaWFsIFNQIFJGQiBH\r\nNDAeFw0xODA4MTAxMzI5MDRaFw0yMTA4MTAxMzI5MDRaMIHQMQswCQYDVQQGEwJCUjETMBEGA1UE\r\nChMKSUNQLUJyYXNpbDE2MDQGA1UECxMtU2VjcmV0YXJpYSBkYSBSZWNlaXRhIEZlZGVyYWwgZG8g\r\nQnJhc2lsIC0gUkZCMRUwEwYDVQQLEwxSRkIgZS1DUEYgQTMxFDASBgNVBAsTCyhFTSBCUkFOQ08p\r\nMRwwGgYDVQQLExNBUiBJTVBSRU5TQSBPRklDSUFMMSkwJwYDVQQDEyBGQUJJTyBEQSBTSUxWQSBD\r\nVU5IQToyODI0NzM1ODgwODCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMKsvt4npifT\r\nU4vcpaVDgitE/QGDCjkKsr5n/9Pu2f/dm1b25VZeG6nM31R6l5sKRiE+qzA3pJ7sh183P/Vmd7vb\r\nx3/QmdtcuQb6SjJfMRVSN+D5FCrPo29wLEInHSdE8ThaqCstt2Sb6aa5+14lIKwPkwpeVaDBUIZd\r\nif3p+CssYbmk88OLC5L8a5yTWzHelNrTFiQK6mlpvE77avDHGTKnkoUimn4CpGddazn9WwynqBvQ\r\n+LKVUw1sqhGHwV/iNPXUJnvx6wZIbypq+YPEoMt3HeRFra6n1yBgaHcm/AoxmbJT1xoyOnQTNX+d\r\np5Mb3BV1XIX5iXBM5E/xsizdSEkCAwEAAaOCAwUwggMBMA4GA1UdDwEB/wQEAwIF4DCBpwYIKwYB\r\nBQUHAQEEgZowgZcwNwYIKwYBBQUHMAGGK2h0dHA6Ly9pby1vY3NwLWljcGJyLmltcHJlbnNhb2Zp\r\nY2lhbC5jb20uYnIwXAYIKwYBBQUHMAKGUGh0dHA6Ly9pby1jb20taWNwYnIuaW1wcmVuc2FvZmlj\r\naWFsLmNvbS5ici9yZXBvc2l0b3Jpby9JTUVTUFJGQi9BQ0lNRVNQUkZCRzQucDdiMB8GA1UdIwQY\r\nMBaAFHpU/MydBo954w1Eye7lw7dNTcuiMGIGA1UdIARbMFkwVwYGYEwBAgMQME0wSwYIKwYBBQUH\r\nAgEWP2h0dHA6Ly9pby1jb20taWNwYnIuaW1wcmVuc2FvZmljaWFsLmNvbS5ici9yZXBvc2l0b3Jp\r\nby9JTUVTUFJGQjAJBgNVHRMEAjAAMIH1BgNVHR8Ege0wgeowVqBUoFKGUGh0dHA6Ly9pby1jb20t\r\naWNwYnIuaW1wcmVuc2FvZmljaWFsLmNvbS5ici9yZXBvc2l0b3Jpby9JTUVTUFJGQi9BQ0lNRVNQ\r\nUkZCRzQuY3JsMEqgSKBGhkRodHRwOi8vd3d3LmRpZ2l0YWx0cnVzdC5jb20uYnIvcmVwb3NpdG9y\r\naW8vSU1FU1BSRkIvQUNJTUVTUFJGQkc0LmNybDBEoEKgQIY+aHR0cDovL3JlcG9zaXRvcmlvLmlj\r\ncGJyYXNpbC5nb3YuYnIvbGNyL0lNRVNQL0FDSU1FU1BSRkJHNC5jcmwwgZEGA1UdEQSBiTCBhoER\r\na2Nhc2Fkb0BzcC5nb3YuYnKgOAYFYEwBAwGgLwQtMDIwNzE5NzkyODI0NzM1ODgwODAwMDAwMDAw\r\nMDAwMDAwMDAwMDAwMDAwMDAwoBcGBWBMAQMGoA4EDDAwMDAwMDAwMDAwMKAeBgVgTAEDBaAVBBMw\r\nMDAwMDAwMDAwMDAwMDAwMDAwMCkGA1UdJQQiMCAGCCsGAQUFBwMCBggrBgEFBQcDBAYKKwYBBAGC\r\nNxQCAjANBgkqhkiG9w0BAQsFAAOCAgEAVUb9X7NRt/Z/tjgb5AsiqvIZQtvMmKEBdBSG3gFm7j7b\r\nGW4noxPyw3XIh9dID2imjCIKnXb664pLsfjk6bqvmhsLiPauSBfRiFyHCm1LJ6C2nSRk+JBQbS8t\r\nl8ykx+xlaqInhpgYeLGllzvro3TuUjmvg6YE7sdk5iwuIRN+O9dmHRidrCt1tNVUMDPG/5N2YMCV\r\nrj9Ff5y/Z9SSG9Begx3zFZAbZfQ+3NFOLd6KywTKo9bErPAhxGZ9PhjeQDx8Y7eN9DgfmcD+VNVx\r\ntVxZPy4x6CcKPnC6MOmLSvecFx+WKIZ3FcNEgq7CFYvt8CWuvht8uqFSOM2MOl7to0RpY8W/4KYO\r\nW7x9WUt3m98DVutZK83oSR3OiUnhZj6cQEvff1HQ57afCH68TVT1q7s7A5ylexsDtjiqTa+v47SF\r\n5wd2ulEAd2B/bEMXHgxLvWEIRnKYzEYOL0W5LLL5kWzEyUU6p4J/jdk+nol0kECMk/ayzk23LcI2\r\nZ0IML4vYnjZjQ3Cfto0yp+8qz9RTROLz8zTiObwEwfCjPHUzBA1vyOY9pI/LGVI5Eaplq5MHljnr\r\n7I83FxQvHt0+9TbsdEXrmvDw77qTk3swqbCWn2mOP43NUJaWrsJRgypS5KhhI1f/rwqS004TfKOt\r\nvz9Gp1CxTr/gFv8Ko6jPSpwrrX2NA7s=</X509Certificate></X509Data></KeyInfo></Signature></eSocial>\r\n      </evento>\r\n    </eventos>\r\n  </envioLoteEventos>\r\n</eSocial>";
}
